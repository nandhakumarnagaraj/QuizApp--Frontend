<!-- components/quiz-create/quiz-create.component.html -->
<div class="container">
  <a routerLink="/quizzes" class="back-link">&larr; Back to Quizzes</a>
  
  <h2>Create New Quiz</h2>

  <div class="error-message" *ngIf="error">{{ error }}</div>

  <form (ngSubmit)="onSubmit()" class="quiz-form">
    <!-- Quiz Title -->
    <div class="form-group">
      <label for="quizText">Quiz Title</label>
      <input 
        type="text" 
        id="quizText" 
        [(ngModel)]="quiz.quizText" 
        name="quizText" 
        placeholder="Enter quiz title"
        required
      />
    </div>

    <!-- Questions -->
    <div class="questions-section">
      <div class="section-header">
        <h3>Questions</h3>
        <button type="button" (click)="addQuestion()" class="btn-add">
          + Add Question
        </button>
      </div>

      <div 
        *ngFor="let question of quiz.questions; let qi = index" 
        class="question-form-card"
      >
        <div class="question-header">
          <span>Question {{ qi + 1 }}</span>
          <button 
            type="button" 
            (click)="removeQuestion(qi)" 
            class="btn-remove"
            *ngIf="quiz.questions.length > 1"
          >
            Remove
          </button>
        </div>

        <div class="form-group">
          <input 
            type="text" 
            [(ngModel)]="question.questionText" 
            [name]="'questionText' + qi"
            placeholder="Enter question text"
            required
          />
        </div>

        <div class="options-form">
          <label>Options (select correct answer):</label>
          
          <div 
            *ngFor="let option of question.options; let oi = index" 
            class="option-form-row"
          >
            <input 
              type="radio" 
              [name]="'correct' + qi"
              [checked]="option.correct"
              (change)="setCorrectOption(qi, oi)"
            />
            <input 
              type="text" 
              [(ngModel)]="option.optionText" 
              [name]="'option' + qi + '_' + oi"
              [placeholder]="'Option ' + 'ABCD'[oi]"
              required
            />
          </div>
        </div>
      </div>
    </div>

    <!-- Submit -->
    <div class="form-actions">
      <button type="submit" [disabled]="loading" class="btn-primary btn-large">
        {{ loading ? 'Creating...' : 'Create Quiz' }}
      </button>
    </div>
  </form>
</div>